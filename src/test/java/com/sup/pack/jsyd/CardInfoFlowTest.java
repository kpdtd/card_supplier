package com.sup.pack.jsyd;

import com.sup.pack.logic.jsyd.dto.CardFlowRequestData;
import com.sup.pack.logic.jsyd.dto.RequestHeader;
import com.sup.pack.logic.jsyd.util.JsydHttpClient;
import com.sup.pack.util.DateUtil;
import com.sup.pack.util.JaxbUtil;
import com.sup.pack.util.JsonHelper;
import com.sup.pack.util.SeqIdGenerator;

/**
 * @author lianzf
 * @Description:
 * @date 18/4/15下午1:15
 */
public class CardInfoFlowTest {

    public static final String URL = "http://221.178.251.182:80/internet_surfing";
    static String [] msisdns = {"1440034214506",
            "1440034214507",
            "1440034214599",
            "1440034214600",
            "1440034214601",
            "1440034214602",
            "1440034214603",
            "1440034214604",
            "1440034214605",
            "1440034214606",
            "1440034214607",
            "1440034214608",
            "1440034214609",
            "1440034214610",
            "1440034214611",
            "1440034214612",
            "1440034214613",
            "1440034214614",
            "1440034214615",
            "1440034214616",
            "1440034214617",
            "1440034214618",
            "1440034214619",
            "1440034214620",
            "1440034214621",
            "1440034214622",
            "1440034214623",
            "1440034214624",
            "1440034214625",
            "1440034214626",
            "1440034214627",
            "1440034214628",
            "1440034214629",
            "1440034214630",
            "1440034214631",
            "1440034214632",
            "1440034214633",
            "1440034214634",
            "1440034214635",
            "1440034214636",
            "1440034214637",
            "1440034214638",
            "1440034214639",
            "1440034214640",
            "1440034214641",
            "1440034214642",
            "1440034214643",
            "1440034214644",
            "1440034214645",
            "1440034214646",
            "1440034214647",
            "1440034214648",
            "1440034214649",
            "1440034214650",
            "1440034214651",
            "1440034214652",
            "1440034214653",
            "1440034214654",
            "1440034214655",
            "1440034214656",
            "1440034214657",
            "1440034214658",
            "1440034214659",
            "1440034214660",
            "1440034214661",
            "1440034214662",
            "1440034214663",
            "1440034214664",
            "1440034214665",
            "1440034214666",
            "1440034214667",
            "1440034214668",
            "1440034214669",
            "1440034214670",
            "1440034214671",
            "1440034214672",
            "1440034214673",
            "1440034214674",
            "1440034214675",
            "1440034214676",
            "1440034214677",
            "1440034214678",
            "1440034214679",
            "1440034214680",
            "1440034214681",
            "1440034214682",
            "1440034214683",
            "1440034214684",
            "1440034214685",
            "1440034214686",
            "1440034214687",
            "1440034214688",
            "1440034214689",
            "1440034214690",
            "1440034214691",
            "1440034214692",
            "1440034214693",
            "1440034214694",
            "1440034214695",
            "1440034214696",
            "1440034214697",
            "1440034214698",
            "1440034214699",
            "1440034214700",
            "1440034214701",
            "1440034214702",
            "1440034214703",
            "1440034214704",
            "1440034214705",
            "1440034214706",
            "1440034214707",
            "1440034214708",
            "1440034214709",
            "1440034214710",
            "1440034214711",
            "1440034214712",
            "1440034214713",
            "1440034214714",
            "1440034214715",
            "1440034214716",
            "1440034214717",
            "1440034214718",
            "1440034214719",
            "1440034214720",
            "1440034214721",
            "1440034214722",
            "1440034214723",
            "1440034214724",
            "1440034214725",
            "1440034214726",
            "1440034214727",
            "1440034214728",
            "1440034214729",
            "1440034214730",
            "1440034214732",
            "1440034214733",
            "1440034214734",
            "1440034214735",
            "1440034214736",
            "1440034214737",
            "1440034214738",
            "1440034214739",
            "1440034214740",
            "1440034214741",
            "1440034214742",
            "1440034214743",
            "1440034214744",
            "1440034214745",
            "1440034214746",
            "1440034214747",
            "1440034214748",
            "1440034214749",
            "1440034214750",
            "1440034214751",
            "1440034214752",
            "1440034214753",
            "1440034214754",
            "1440034214755",
            "1440034214756",
            "1440034214757",
            "1440034214758",
            "1440034214759",
            "1440034214760",
            "1440034214761",
            "1440034214762",
            "1440034214763",
            "1440034214764",
            "1440034214765",
            "1440034214766",
            "1440034214767",
            "1440034214768",
            "1440034214769",
            "1440034214770",
            "1440034214771",
            "1440034214772",
            "1440034214773",
            "1440034214774",
            "1440034214775",
            "1440034214776",
            "1440034214777",
            "1440034214778",
            "1440034214779",
            "1440034214780",
            "1440034214781",
            "1440034214782",
            "1440034214783",
            "1440034214784",
            "1440034214785",
            "1440034214786",
            "1440034214787",
            "1440034214788",
            "1440034214789",
            "1440034214790",
            "1440034214791",
            "1440034214792",
            "1440034214793",
            "1440034214794",
            "1440034214795",
            "1440034214796",
            "1440034214797",
            "1440034214798",
            "1440034214799",
            "1440034214800",
            "1440034214801",
            "1440034214802",
            "1440034214803",
            "1440034214804",
            "1440034214805",
            "1440034214806",
            "1440034214807",
            "1440034214808",
            "1440034214809",
            "1440034214810",
            "1440034214811",
            "1440034214812",
            "1440034214813",
            "1440034214814",
            "1440034214815",
            "1440034214816",
            "1440034214817",
            "1440034214818",
            "1440034214819",
            "1440034214820",
            "1440034214821",
            "1440034214822",
            "1440034214823",
            "1440034214824",
            "1440034214825",
            "1440034214826",
            "1440034214827",
            "1440034214828",
            "1440034214829",
            "1440034214830",
            "1440034214831",
            "1440034214832",
            "1440034214833",
            "1440034214834",
            "1440034214835",
            "1440034214836",
            "1440034214837",
            "1440034214838",
            "1440034214839"};
    public static void main(String[] args) throws Exception{
        //for(String msisdn : msisdns){
            String interfaceTag = "OPEN_QRYINTERNETUSERGPRS";
            RequestHeader header = new RequestHeader();
            header.setProcessCode(interfaceTag);
            header.setReqSeq(SeqIdGenerator.createJsydReqSeq());
            CardFlowRequestData data = new CardFlowRequestData();
            data.setServiceNumber("1440034214699");
            data.setCycle(DateUtil.getCurDateTime(DateUtil.DATE_FORMAT_MONTH));
            //data.setCycle(DateUtil.dateToString(DateUtil.getLastDayOfBeforeMonth(),DateUtil.DATE_FORMAT_MONTH));
            header.setContent(data);
            String formData = JaxbUtil.convertToXml(header);

            String response = JsydHttpClient.postRequest(URL, formData);

            System.out.println(JsonHelper.xml2json(response));
            if(!response.contains("<cumulate_value>0</cumulate_value>")){
                System.out.println("请求报文：" + formData);
                System.out.println("响应报文：" + response);
            }
       // }


    }
}
